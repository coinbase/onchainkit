---
title: <Transaction /> Â· OnchainKit
description: The `<Transaction />` components provide a high-level wrap around the entire transaction flow. It handles the transaction lifecycle, including gas estimation, fee sponsorship, and status updates.
---

import { Avatar, Name } from '@coinbase/onchainkit/identity';
import { 
  Transaction, 
  TransactionButton,
  TransactionSponsor,
  TransactionStatus,
  TransactionStatusAction,
  TransactionStatusLabel,
  TransactionToast,
  TransactionToastAction,
  TransactionToastIcon,
  TransactionToastLabel,
} from '@coinbase/onchainkit/transaction';
import { Wallet, ConnectWallet } from '@coinbase/onchainkit/wallet';
import App from '../../components/App';
import TransactionWrapper from '../../components/TransactionWrapper';

export const BASE_SEPOLIA_CHAIN_ID = 84532;
export const PAYMASTER_AND_BUNDLER_ENDPOINT = import.meta.env.VITE_CDP_PAYMASTER_AND_BUNDLER_ENDPOINT;

# `<Transaction />`

The `<Transaction />` components provide a high-level wrap around the entire transaction flow. 
It handles the transaction lifecycle, including gas estimation, fee sponsorship, and status updates.

Before using them, ensure you've completed all [Getting Started steps](/getting-started).

## Walkthrough

::::steps

### Add `contracts`

Execute one or multiple `contracts` using the Transaction component. Each `contract` should include:
- `address`: the contract address;
- `abi`: the contract's ABI;
- `functionName`: a function to extract from the ABI;
- `args`: arguments to pass to the function call.

:::code-group

```tsx twoslash [TransactionComponents.tsx]
// @noErrors: 2307 - cannot find module './contracts' or its corresponding type declarations
import { useCallback } from 'react';
import { Avatar, Name } from '@coinbase/onchainkit/identity';
import { // [!code focus]
  Transaction, // [!code focus]
  TransactionButton,
  TransactionSponsor,
  TransactionStatus,
  TransactionStatusAction,
  TransactionStatusLabel,
} from '@coinbase/onchainkit/transaction'; // [!code focus]
import type { LifecycleStatus } from '@coinbase/onchainkit/transaction';
import { Wallet, ConnectWallet } from '@coinbase/onchainkit/wallet';
import { useAccount } from 'wagmi';
import { contracts } from './contracts'; // [!code focus]
// ---cut-start---

const BASE_SEPOLIA_CHAIN_ID = 84532;
// ---cut-end---

export default function TransactionComponents() {
  const { address } = useAccount();
  
  const handleOnStatus = useCallback((status: LifecycleStatus) => {
    console.log('LifecycleStatus', status);
  }, []);

  return address ? (
    <Transaction // [!code focus]
      chainId={BASE_SEPOLIA_CHAIN_ID} // [!code focus]
      contracts={contracts} // [!code focus]
      onStatus={handleOnStatus}
    > // [!code focus]
      <TransactionButton />
      <TransactionSponsor />
      <TransactionStatus>
        <TransactionStatusLabel />
        <TransactionStatusAction />
      </TransactionStatus>
    </Transaction>  // [!code focus]
  ) : (
    <Wallet>
      <ConnectWallet>
        <Avatar className='h-6 w-6' />
        <Name />
      </ConnectWallet>
    </Wallet>
  );
};
```

```ts twoslash [contracts.ts]
const clickContractAddress = '0x67c97D1FB8184F038592b2109F854dfb09C77C75';
const clickContractAbi = [
  {
    type: 'function',
    name: 'click',
    inputs: [],
    outputs: [],
    stateMutability: 'nonpayable',
  },
] as const;

export const contracts = [
  {
    address: clickContractAddress,
    abi: clickContractAbi,
    functionName: 'click',
    args: [],
  },
];
```

:::

<App>
  <TransactionWrapper>
    {({ address, contracts, onStatus }) => {
      const capabilities = {
        paymasterService: {
          url: PAYMASTER_AND_BUNDLER_ENDPOINT,
        },
      }
      if (address) {
        return (
          <Transaction
            capabilities={capabilities}
            chainId={BASE_SEPOLIA_CHAIN_ID}
            contracts={contracts}
            onStatus={onStatus} 
          >
            <TransactionButton />
            <TransactionSponsor />
            <TransactionStatus>
              <TransactionStatusLabel />
              <TransactionStatusAction />
            </TransactionStatus>
          </Transaction>
        )
      } else {
        return (
          <Wallet>
            <ConnectWallet>
              <Avatar className="h-6 w-6" />
              <Name />
            </ConnectWallet>
          </Wallet>
        )
      }
    }}
  </TransactionWrapper>
</App>

### Listen to `LifecycleStatus`

Take full control of your transactions data with the `LifecycleStatus` object via the `onStatus` prop. 
This TypeScript object provides `statusName` and `statusData` to keep you informed.

```tsx twoslash
// @noErrors: 2307 - cannot find module './contracts' or its corresponding type declarations
import { useCallback } from 'react';
import {
  Transaction,
  TransactionButton,
  TransactionSponsor,
  TransactionStatus,
  TransactionToast,
  TransactionToastIcon,
  TransactionToastLabel,
  TransactionToastAction,
} from '@coinbase/onchainkit/transaction';
import { contracts } from './contracts';
// ---cut-before---
import type { LifecycleStatus } from '@coinbase/onchainkit/transaction'; // [!code focus]

// ommited for brevity

const handleOnStatus = useCallback((status: LifecycleStatus) => { // [!code focus]
  console.log('LifecycleStatus', status); // [!code focus]
}, []); // [!code focus]

// ommited for brevity

<Transaction  // [!code focus]
  contracts={contracts}
  onStatus={handleOnStatus} // [!code focus]
>  // [!code focus]
  <TransactionButton />
  <TransactionSponsor />
  <TransactionToast>
    <TransactionToastIcon />
    <TransactionToastLabel />
    <TransactionToastAction />
  </TransactionToast>
</Transaction> // [!code focus]
```

The Lifecycle Status features six states for the transaction experience.

```ts twoslash
import type { TransactionError } from "@coinbase/onchainkit/transaction";
import type { Address, TransactionReceipt } from "viem";
// ---cut-before---
type LifecycleStatus =
  | {
      statusName: 'init';
      statusData: null;
    }
  | {
      statusName: 'error';
      statusData: TransactionError;
    }
  | {
      statusName: 'transactionIdle'; // initial status prior to the mutation function executing
      statusData: null;
    }
  | {
      statusName: 'transactionPending'; // if the mutation is currently executing
      statusData: null;
    }
  | {
      statusName: 'transactionLegacyExecuted';
      statusData: {
        transactionHashList: Address[];
      };
    }
  | {
      statusName: 'success'; // if the last mutation attempt was successful
      statusData: {
        transactionReceipts: TransactionReceipt[];
      };
    };
```

### Sponsor with Paymaster capabilities

To sponsor your transactions with Paymaster capabilities, provide the `paymasterService` object.

Obtain a Paymaster and Bundler endpoint from the [Coinbase Developer Platform](https://portal.cdp.coinbase.com/products/bundler-and-paymaster).

<img
  alt="OnchainKit Paymaster and Bundler endpoint"
  title="OnchainKit Paymaster and Bundler endpoint"
  src="/assets/onchainkit-components-paymaster-endpoint.png"
  width="702"
  loading="lazy"
/>

```tsx twoslash
// @noErrors: 2580 2304 - Cannot find name 'process', Cannot find name 'contracts'
import { Transaction, TransactionButton, TransactionSponsor } from "@coinbase/onchainkit/transaction"
// ---cut-before---
// ommited for brevity
<Transaction
  capabilities={{ // [!code focus]
    paymasterService: { // [!code focus]
      url: process.env.PAYMASTER_AND_BUNDLER_ENDPOINT, // [!code focus]
    }, // [!code focus]
  }} // [!code focus]
  contracts={contracts}
  >
  <TransactionButton />
  <TransactionSponsor />
</Transaction>
```

::::

## Components

<div className="flex flex-col max-w-[648px] gap-6">
  <img 
    src="/assets/onchainkit-components-transaction-anatomy.png" 
    alt="OnchainKit transaction anatomy component diagram"
    title="Visual breakdown of OnchainKit transaction components"
    width="648"
    loading="lazy"
  />
</div>

The components are designed to work together hierarchically. For each component, ensure the following:
- `<Transaction />` - Serves as the main container for all transaction-related components.
- `<TransactionButton />` - Handles the transaction initiation process.
- `<TransactionSponsor />` - Displays information about the sponsorship of transaction gas fees.
- `<TransactionStatus />` - Contains transaction status information and actions.
- `<TransactionStatusLabel />` - Displays the current status of the transaction.
- `<TransactionStatusAction />` - Provides additional actions based on the transaction status.
- `<TransactionToast />` - Displays a toast notification for the transaction status.
- `<TransactionToastIcon />` - Displays an icon in the transaction toast notification.
- `<TransactionToastLabel />` - Displays the label text in the transaction toast notification.
- `<TransactionToastAction />` - Provides additional actions within the transaction toast notification.

## Component types

- [`TransactionButtonReact`](/transaction/types#transactionbuttonreact)
- [`TransactionError`](/transaction/types#transactionerror)
- [`TransactionReact`](/transaction/types#transactionreact)
- [`TransactionSponsorReact`](/transaction/types#transactionsponsorreact)
- [`TransactionStatusReact`](/transaction/types#transactionstatusreact)
- [`TransactionStatusActionReact`](/transaction/types#transactionstatusactionreact)
- [`TransactionStatusLabelReact`](/transaction/types#transactionstatuslabelreact)
- [`TransactionToastReact`](/transaction/types#transactiontoastreact)
- [`TransactionToastActionReact`](/transaction/types#transactiontoastactionreact)
- [`TransactionToastIconReact`](/transaction/types#transactiontoasticonreact)
- [`TransactionToastLabelReact`](/transaction/types#transactiontoastlabelreact)
